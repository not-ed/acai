name: Publish Android Build

on:
    workflow_dispatch:

jobs:
    publish_release:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout main
              uses: actions/checkout@v3

            - name: Setup .NET to provide .NET MAUI Android Workload
              uses: actions/setup-dotnet@v3
              with: 
                dotnet-version: '8.0.x'

            - name: Install .NET MAUI Workload for Android
              run: dotnet workload install maui-android

            - name: Run dotnet build and publish
              working-directory: Acai/AcaiMobile
              run: |
                dotnet build -t:InstallAndroidDependencies -f net8.0-android -p:AndroidSdkDirectory=\work\android-sdk -p:JavaSdkDirectory=\work\jdk -p:AcceptAndroidSdkLicenses=True
                dotnet publish -f net8.0-android -p:AndroidSdkDirectory=\work\android-sdk -p:JavaSdkDirectory=\work\jdk -o ./acai_dist
                ls acai_dist
